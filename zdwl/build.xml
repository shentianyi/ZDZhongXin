<?xml version="1.0" encoding="UTF-8"?>
<project basedir="." default="test_tomcat" name="zd">
	<!-- Project directories -->
	<property name="src.dir" value="${basedir}/src" />
	<property name="webroot.dir" value="${basedir}/WebRoot" />
	<property name="webroot.lib" value="${basedir}/WebRoot/lib" />
	<property name="configfile.dir" value="${basedir}/config_file" />
	<property name="libs.dir" value="${basedir}/WebRoot/WEB-INF/lib" />
	<property name="webinf.dir" value="${basedir}/WebRoot/WEB-INF" />
	<property name="meta-inf" value="${basedir}/WebRoot/META-INF" />

	<!-- war directory names -->
	<property name="war.dir" value="C:/apache-tomcat-6.0.45_64/webapps/zd" />
	<property name="war.webinf" value="${war.dir}/WEB-INF" />
	<property name="war.classes" value="${war.dir}/WEB-INF/classes" />
	<property name="war.lib" value="${war.dir}/WEB-INF/lib" />
	<property name="war.metainf" value="${war.dir}/META-INF" />
	<property name="war.file" value="${war.dir}/file" />
	<property name="war.pdf" value="${war.dir}/pdf" />

	<!-- classpath set -->
	<path id="classpath">
		<fileset dir="${libs.dir}">
			<include name="**/*.jar" />
		</fileset>
	</path>
	<path id="compile.path">
		<pathelement location="${war.classes}" />
		<fileset dir="${libs.dir}">
			<include name="**/*.jar" />
		</fileset>
		<fileset dir="${webroot.lib}">
			<include name="**/*.jar" />
		</fileset>
	</path>

	<!-- delete -->
	<target name="clean">
		<delete dir="${war.dir}" />
	</target>

	<target depends="clean" name="init">
		<mkdir dir="${war.dir}" />
		<mkdir dir="${war.webinf}" />
		<mkdir dir="${war.classes}" />
		<mkdir dir="${war.lib}" />
		<mkdir dir="${war.metainf}" />
		<mkdir dir="${war.file}" />
		<mkdir dir="${war.pdf}" />

	</target>
	<target name="compile" depends="init">
		<javac destdir="${war.classes}" srcdir="${src.dir}"
			classpathref="compile.path" debug="on" target="1.6" source="1.6"
			includeantruntime="on" encoding="utf8" />
	</target>

	<target depends="compile" name="test_tomcat">
		<copy todir="${war.lib}">
			<fileset dir="${libs.dir}" includes="**/*.jar"
				excludes="servlet-api.jar,jsp-api.jar" />
		</copy>
		<copy todir="${war.classes}">
			<fileset dir="${src.dir}" includes="**/*.xml,**/*.properties" />
		</copy>
		<copy todir="${war.webinf}">
			<fileset dir="${webinf.dir}" includes="**/*.xml,**/*.properties,**/*.jsp,,**/*.tld" />
		</copy>
		<copy todir="${war.metainf}">
			<fileset dir="${meta-inf}" includes="**/**" />
		</copy>
		<copy todir="${war.dir}">
			<fileset dir="${webroot.dir}" includes="common/**/*.*,css/**/*.*,easyui/**/*.*,
			images/**/*.*,js/**/*.*,pagejs/**/*.*,system/**/*.*,ue/**/*.*,index.jsp" />
		</copy>
		
	</target>


</project>